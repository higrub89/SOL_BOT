version: '3.8'

services:
  # üèéÔ∏è THE CHASSIS - Core Trading Engine
  bot:
    build: 
      context: .
      dockerfile: Dockerfile
    image: the_chassis:production
    container_name: solana_trading_bot
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - RUST_LOG=info
    volumes:
      # Persistencia de logs
      - ./logs:/app/logs
      # Config din√°mica ‚Äî edita targets.json y reinicia para aplicar cambios
      - ./targets.json:/app/targets.json
      # Base de datos de estado persistente (posiciones, historial, PnL)
      - ./trading_state.db:/app/trading_state.db
      # Cache de pools de Raydium
      - ./pools_cache.json:/app/pools_cache.json
    deploy:
      resources:
        limits:
          cpus: '1.50'
          memory: 2048M
