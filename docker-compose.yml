version: '3.8'

services:
  # ğŸï¸ THE CHASSIS - Core Trading Engine
  bot:
    build: 
      context: .
      dockerfile: Dockerfile
    image: the_chassis:production
    container_name: solana_trading_bot
    restart: unless-stopped
    # Mapear puerto si usaramos dashboard web en el futuro
    # ports:
    #   - "3000:3000"
    env_file:
      - .env
    environment:
      - RUST_LOG=info
    volumes:
      # Persistencia de logs
      - ./logs:/app/logs
      # Archivos de configuraciÃ³n dinÃ¡micos (para poder editarlos sin reiniciar)
      - ./core/the_chassis/targets.json:/app/targets.json
      - ./core/the_chassis/pools_cache.json:/app/pools_cache.json
    deploy:
      resources:
        limits:
          cpus: '1.50'
          memory: 2048M

  # ğŸš€ (Opcional) Redis para cachÃ© compartido futuro
  # redis:
  #   image: redis:alpine
  #   restart: always
